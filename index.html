<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MyFit - Фитнес трекер</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'San Francisco', sans-serif;
            background-color: #f5f5f7;
            color: #1c1c1e;
            line-height: 1.6;
            -webkit-text-size-adjust: 100%;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        .auth-form, .calc-container {
            background: #ffffff;
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }
        h1 {
            color: #0066cc;
            text-align: center;
            font-size: 24px;
            margin-bottom: 25px;
            font-weight: 600;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: 500;
            color: #3a3a3c;
        }
        input, select {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 1px solid #d1d1d6;
            border-radius: 12px;
            background-color: #fbfbfd;
            -webkit-appearance: none;
        }
        button {
            width: 100%;
            background: linear-gradient(to right, #007aff, #00a2ff);
            color: white;
            border: none;
            padding: 16px;
            font-size: 17px;
            font-weight: 500;
            border-radius: 12px;
            margin-top: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        #result {
            margin-top: 25px;
            padding: 20px;
            background: #f5f5f7;
            border-radius: 12px;
            font-size: 16px;
            display: none;
        }
        .hidden {
            display: none;
        }
        @media (prefers-color-scheme: dark) {
            body {
                background: #000;
                color: #fff;
            }
            .auth-form, .calc-container {
                background: #1c1c1e;
            }
            input, select {
                background: #2c2c2e;
                border-color: #3a3a3c;
                color: #fff;
            }
            #result {
                background: #2c2c2e;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Форма авторизации -->
        <div id="authForm" class="auth-form">
            <h1>Вход в MyFit</h1>
            
            <div class="input-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="ваш@email.com">
            </div>
            
            <div class="input-group">
                <label for="password">Пароль</label>
                <input type="password" id="password" placeholder="••••••••">
            </div>
            
            <button onclick="login()">Войти</button>
            <button onclick="showRegister()" style="background: transparent; color: #007aff; border: 1px solid #007aff; margin-top: 10px;">
                Регистрация
            </button>
        </div>
        
        <!-- Форма регистрации -->
        <div id="registerForm" class="auth-form hidden">
            <h1>Регистрация</h1>
            
            <div class="input-group">
                <label for="regName">Имя</label>
                <input type="text" id="regName" placeholder="Ваше имя">
            </div>
            
            <div class="input-group">
                <label for="regEmail">Email</label>
                <input type="email" id="regEmail" placeholder="ваш@email.com">
            </div>
            
            <div class="input-group">
                <label for="regPassword">Пароль</label>
                <input type="password" id="regPassword" placeholder="••••••••">
            </div>
            
            <button onclick="register()">Зарегистрироваться</button>
            <button onclick="showLogin()" style="background: transparent; color: #007aff; border: 1px solid #007aff; margin-top: 10px;">
                Уже есть аккаунт? Войти
            </button>
        </div>
        
        <!-- Калькулятор (показывается после входа) -->
        <div id="calcApp" class="calc-container hidden">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1>Калькулятор калорий</h1>
                <button onclick="logout()" style="width: auto; padding: 8px 12px; font-size: 14px;">Выйти</button>
            </div>
            
            <div class="input-group">
                <label for="age">Возраст (лет)</label>
                <input type="number" id="age" placeholder="25" min="10" max="120">
            </div>
            
            <div class="input-group">
                <label for="weight">Вес (кг)</label>
                <input type="number" id="weight" placeholder="70" min="30" max="300" step="0.1">
            </div>
            
            <div class="input-group">
                <label for="height">Рост (см)</label>
                <input type="number" id="height" placeholder="175" min="100" max="250">
            </div>
            
            <div class="input-group">
                <label for="gender">Пол</label>
                <select id="gender">
                    <option value="male">Мужской</option>
                    <option value="female">Женский</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="activity">Уровень активности</label>
                <select id="activity">
                    <option value="1.2">Сидячий образ жизни</option>
                    <option value="1.375">Легкая активность</option>
                    <option value="1.55" selected>Умеренная активность</option>
                    <option value="1.725">Высокая активность</option>
                </select>
            </div>
            
            <button onclick="calculateCalories()">Рассчитать</button>
            
            <div id="result"></div>
        </div>
    </div>

    <script>
        // Текущий пользователь
        let currentUser = null;
        
        // Показать форму входа
        function showLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('authForm').classList.remove('hidden');
        }
        
        // Показать форму регистрации
        function showRegister() {
            document.getElementById('authForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }
        
        // Вход
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                alert("Пожалуйста, заполните все поля");
                return;
            }
            
            // Простая проверка (в реальном приложении нужно подключить бэкенд)
            const users = JSON.parse(localStorage.getItem('fitUsers') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                document.getElementById('authForm').classList.add('hidden');
                document.getElementById('calcApp').classList.remove('hidden');
            } else {
                alert("Неверный email или пароль");
            }
        }
        
        // Регистрация
        function register() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            
            if (!name || !email || !password) {
                alert("Пожалуйста, заполните все поля");
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('fitUsers') || '[]');
            
            if (users.some(u => u.email === email)) {
                alert("Пользователь с таким email уже существует");
                return;
            }
            
            const newUser = { name, email, password };
            users.push(newUser);
            localStorage.setItem('fitUsers', JSON.stringify(users));
            
            alert("Регистрация успешна! Теперь вы можете войти.");
            showLogin();
        }
        
        // Выход
        function logout() {
            currentUser = null;
            document.getElementById('calcApp').classList.add('hidden');
            document.getElementById('authForm').classList.remove('hidden');
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        }
        
        // Расчет калорий
        function calculateCalories() {
            const age = parseInt(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const gender = document.getElementById('gender').value;
            const activity = parseFloat(document.getElementById('activity').value);
            
            if (!age || !weight || !height || age < 10 || weight < 30 || height < 100) {
                alert("Пожалуйста, введите корректные данные");
                return;
            }
            
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            const total = Math.round(bmr * activity);
            const loss = Math.max(total - 300, 1200);
            const gain = total + 300;
            
            document.getElementById('result').innerHTML = `
                <div style="margin-bottom: 10px;"><strong>Базовый метаболизм:</strong> ${Math.round(bmr)} ккал</div>
                <div style="margin-bottom: 10px;"><strong>Суточная норма:</strong> ${total} ккал</div>
                <div style="margin-bottom: 10px;"><strong>Для похудения:</strong> ${loss} ккал</div>
                <div><strong>Для набора массы:</strong> ${gain} ккал</div>
            `;
            
            document.getElementById('result').style.display = 'block';
        }
    </script>
</body>
</html>
